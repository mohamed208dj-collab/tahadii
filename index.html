<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ORBITRON | HARDCORE PRO</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --cyan: #00f2fe;
            --pink: #f093fb;
            --glass: rgba(10, 10, 20, 0.85);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            background: #020205; height: 100vh; display: flex; align-items: center; justify-content: center;
            overflow: hidden; font-family: 'Cairo', sans-serif;
            background: radial-gradient(circle at center, #0a0a20 0%, #020205 100%);
        }

        /* الخلفية المتحركة الأصلية */
        .bg-glow {
            position: absolute; width: 450px; height: 450px;
            background: linear-gradient(var(--cyan), var(--pink));
            filter: blur(120px); opacity: 0.12; animation: move 20s infinite alternate;
        }
        @keyframes move { from {transform: translate(-100px, -100px);} to {transform: translate(100px, 100px);} }

        /* البطاقة الزجاجية الفخمة */
        .pro-card {
            position: relative; z-index: 10;
            width: 92%; max-width: 460px;
            background: var(--glass); backdrop-filter: blur(50px);
            border-radius: 40px; padding: 45px 30px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
            text-align: center; transition: 0.3s;
        }

        /* شريط الوقت العلوي (نيون) */
        .timer-track {
            position: absolute; top: 0; left: 0; width: 100%; height: 5px;
            background: rgba(255,255,255,0.05); border-radius: 40px 40px 0 0; overflow: hidden;
        }
        .timer-fill {
            width: 100%; height: 100%; background: linear-gradient(90deg, var(--cyan), var(--pink));
            transition: width 1s linear;
        }

        .header {
            display: flex; justify-content: space-between; align-items: center;
            font-family: 'Orbitron'; font-size: 0.7rem; color: var(--cyan); margin-bottom: 35px;
        }

        .lives-ui { color: #ff3e3e; font-size: 1.2rem; letter-spacing: 3px; }

        .question {
            min-height: 150px; font-size: 1.7rem; font-weight: 800;
            color: #fff; margin-bottom: 30px; line-height: 1.5;
            text-shadow: 0 0 15px rgba(255,255,255,0.1);
        }

        input {
            width: 100%; padding: 22px; background: rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 20px;
            color: #fff; font-size: 1.4rem; text-align: center;
            transition: 0.3s; margin-bottom: 20px;
        }
        input:focus { border-color: var(--cyan); box-shadow: 0 0 30px rgba(0, 242, 254, 0.2); outline: none; }

        .btn-execute {
            width: 100%; padding: 22px; background: #fff; color: #000;
            border: none; border-radius: 18px; font-family: 'Orbitron';
            font-weight: 900; font-size: 1.2rem; cursor: pointer; transition: 0.3s;
            box-shadow: 0 10px 30px rgba(255,255,255,0.1);
        }
        .btn-execute:hover { transform: scale(1.02); background: var(--cyan); }

        /* الأنيميشن */
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        .low-time { filter: drop-shadow(0 0 10px #ff3e3e); }
    </style>
</head>
<body>

<div class="bg-glow"></div>

<div class="pro-card" id="card">
    <div class="timer-track"><div class="timer-fill" id="timerBar"></div></div>
    
    <div class="header">
        <span>NODE_<span id="lvlIdx">01</span></span>
        <div class="lives-ui" id="hearts">♥♥♥</div>
    </div>

    <div class="question" id="qBox">SYSTEM_BOOTING...</div>

    <input type="text" id="ansInput" placeholder="ENTER ACCESS KEY" autocomplete="off" onpaste="return false;">

    <button class="btn-execute" onclick="verify()">EXECUTE_LOGIN</button>
    
    <div style="margin-top:20px; font-family:Orbitron; font-size:0.6rem; color:#444; letter-spacing:2px;" id="statusText">MEMORY_STABLE</div>
</div>

<script>
    const RIDDLES = [
        {q: "ما هو الشيء الذي يكسو الناس وهو عارٍ؟", a: ["الابرة", "ابرة"]},
        {q: "له مدن بلا بيوت وجبال بلا أشجار؟", a: ["الخريطة", "خريطة"]},
        {q: "كلما زاد نقص؟", a: ["العمر", "عمر"]},
        {q: "تسمع بلا أذن وتتكلم بلا لسان؟", a: ["الهاتف", "تلفون", "هاتف"]},
        {q: "قلبه يأكل قشره؟", a: ["الشمعة", "شمعة"]},
        {q: "شيء نأكله ولا يؤكل؟", a: ["الصحن", "الطبق"]}
    ];
    for(let i=7; i<=100; i++) RIDDLES.push({q: `لغز المستوى ${i}: شيء له أسنان ولا يعض؟`, a: ["المشط", "مشط"]});

    let step = parseInt(localStorage.getItem('orb_pro_hard_step')) || 0;
    let lives = 3;
    let seconds = 30;
    let timer;

    function render() {
        if(step >= 100) return win();
        document.getElementById('qBox').innerText = RIDDLES[step].q;
        document.getElementById('lvlIdx').innerText = (step+1 < 10) ? '0'+(step+1) : step+1;
        document.getElementById('ansInput').value = "";
        resetTimer();
    }

    function resetTimer() {
        clearInterval(timer);
        seconds = 30;
        updateTimerUI();
        timer = setInterval(() => {
            seconds--;
            updateTimerUI();
            if(seconds <= 0) handleFail();
        }, 1000);
    }

    function updateTimerUI() {
        const bar = document.getElementById('timerBar');
        bar.style.width = (seconds / 30) * 100 + "%";
        bar.style.background = seconds <= 10 ? "#ff3e3e" : "linear-gradient(90deg, var(--cyan), var(--pink))";
    }

    function verify() {
        const val = document.getElementById('ansInput').value.trim().toLowerCase();
        if(RIDDLES[step].a.some(ans => val.includes(ans.toLowerCase()))) {
            confetti({ particleCount: 150, spread: 70, colors: ['#00f2fe', '#f093fb'] });
            step++;
            localStorage.setItem('orb_pro_hard_step', step);
            lives = 3; // استعادة القلوب
            updateLives();
            render();
        } else {
            handleFail();
        }
    }

    function handleFail() {
        lives--;
        updateLives();
        const card = document.getElementById('card');
        card.classList.add('shake');
        if(window.navigator.vibrate) window.navigator.vibrate(300);
        
        if(lives <= 0) {
            alert("SYSTEM FAILURE: عودة للمرحلة السابقة!");
            lives = 3;
            if(step > 0) step--;
            localStorage.setItem('orb_pro_hard_step', step);
        }
        setTimeout(() => card.classList.remove('shake'), 400);
        render();
    }

    function updateLives() {
        document.getElementById('hearts').innerText = "♥".repeat(lives) + "♡".repeat(3-lives);
    }

    function win() {
        clearInterval(timer);
        document.getElementById('card').innerHTML = `<h1 style="color:var(--cyan); font-family:Orbitron;">GOD_MODE</h1><p style="color:#fff; margin:20px 0;">لقد قهرت الـ 100 لغز باحترافية.</p><button class="btn-execute" onclick="localStorage.clear(); location.reload();">REBOOT</button>`;
    }

    window.onload = render;
</script>
</body>
</html>
